#config_version=5
#Cuphead Base Mode Config

mode:
  start_events: ball_starting
  priority: 100 # lowest pririty so other modes can take over
#  stop_events: ball_will_end

counters:
  bonus:
    count_events: drop_target_bank_cup_bank_down, drop_target_bank_mug_bank_down # each bank gets its own counter
    events_when_hit: bank_done # when each back is done the event "bank_done" is posted
    starting_count: 0
    count_complete_value: 10 # set to 10 becasue there are 10 bonus lights
    direction: up
    persist_state: false # does not keep its value from ball to ball
    disable_on_complete: true # once all ten bonus lights are lit, stop the counter
  spinner_rotations:
    count_events: s_spinner_active
    count_complete_value: 7
    starting_count: 0
    direction: up
    persist_state: true
    events_when_hit: advance_lane
    reset_on_complete: true
    disable_on_complete: false

timers:
  spinner_timer:
    direction: down
    start_value: 5
    end_value: 0
    tick_interval: 500ms
    debug: true
    control_events:
      - action: restart
        event: s_spinner_active
  perditionPost_timer:
    direction: down
    start_value: 2
    end_value: 0
    tick_interval: 500ms
    debug: true
    control_events:
      - action: start
        event: startMBPost

show_player:
  mode_base_started: base_lighting
  advance_lane{count==1}:
    1_on: play
    7_on: stop
  advance_lane{count==2}:
    2_on: play
    1_on: stop
  advance_lane{count==3}:
    3_on: play
    2_on: stop
  advance_lane{count==4}:
    4_on: play
    3_on: stop
  advance_lane{count==5}:
    5_on: play
    4_on: stop
  advance_lane{count==6}:
    6_on: play
    5_on: stop
  advance_lane{count==7}:
    7_on: play
    6_on: stop
  bank_done{count==1}: 1000_on # if bank_done is posted and the count value is 1 then run the show 1000_on
  bank_done{count==2}: 2000_on
  bank_done{count==3}: 3000_on
  bank_done{count==4}: 4000_on
  bank_done{count==5}: 5000_on
  bank_done{count==6}: 6000_on
  bank_done{count==7}: 7000_on
  bank_done{count==8}: 8000_on
  bank_done{count==9}: 9000_on
  bank_done{count==10}: 10000_on

shots:
  knock_out:
    switch: s_standUp_R

coil_player:  # this coil player controls the post that blocks entrance to the perdition lane
  s_trough1_active: c_perdition_post_down # drop on any ball end or if...
  startMBPost: c_perdition_post_down  # the perdition multiball is started
  timer_perditionPost_timer_complete: c_perdition_post_up  # put the post back up after the ball has exited
  mbReady: c_perdition_post_up # put the post up if the multiball is ready to keep the active ball out of the perdition lane


variable_player:
  bonus:
    int: 1
    action: set
  s_popBumper_1_active:
    score: 100
  s_popBumper_2_active:
    score: 100
  s_popBumper_3_active:
    score: 100
  s_dt_C_active:
    score: 100
  s_dt_U_active:
    score: 100
  s_dt_P_active:
    score: 100
  s_dt_M_active:
    score: 100
  s_dt_U2_active:
    score: 100
  s_dt_G_active:
    score: 100
  drop_target_bank_cup_bank_down: # if the bank is dropped...
    contracts: 1 # increment the counter contracts by one
  drop_target_bank_mug_bank_down:
    contracts: 1
  mode_base_started: # when the mode starts...
    contracts:
      int: 0 # put 0...
      action: set # into contracts
  s_midRight_active:
    score: 50
  s_perdition_active:
    score: 100
  s_dtSling_L_active:
    score: 10
  s_dtSling_R_active:
    score: 10
  s_sling_L_active:
    score: 10
  s_sling_R_active:
    score: 10
  knock_out_hit:
    score: 500
  s_spinner_active: # if the spinner switch is active...
    spinner_rotations: 1 # add one to the player variable spinner_rotations and..
    score: 1 # score 10 points per spinner spin
  advance_lane{count<7}: # if the advance_lane counter is less than 7..
    dice_pips: 1 #advance the player variable dice_pips by one so that it is not "7"
  advance_lane{count==7}: # if the advance_lane counter is 7 then set the..
    dice_pips: # player variable dice_pips to...
      int: 7 # equal 7
      action: set
  timer_spinner_timer_complete{current_player.dice_pips==7}: #if the dice light is on when the spinner stops
    score: 1 #then payout
  s_star_1_active:
    score: 50
  s_star_2_active:
    score: 50
  s_star_3_active:
    score: 50
  s_inLane_L_active:
    score: 50
  s_inLane_R_active:
    score: 50
  s_outLane_L_active:
    score: 100
  s_outLane_R_active:
    score: 100
  s_kicker_active:
    score: 1000  #+(1000*perdition_value)


sound_player:
  mode_base_started: # when the mode starts...
    poolCupHeadBase: # select a song from the pool..
      loops: -1 # and loop it indefinitely
  ball_drain{game.balls_in_play==1} : # when the ball drains...
    poolCupHeadBase:
      action: stop # stop playing the music
  ball_drain: drainHit
  s_inLane_L_active: inLanes
  s_inLane_R_active: inLanes
  s_outLane_L_active: outLanes
  s_outLane_R_active: outLanes
  bank_done{count==1}: soul1
  bank_done{count==2}: soul2
  bank_done{count==3}: soul3
  bank_done{count==4}: soul4
  bank_done{count==5}: soul5
  bank_done{count==6}: soul6
  bank_done{count==7}: soul7
  bank_done{count==8}: soul8
  bank_done{count==9}: soul9
  bank_done{count==10}: soul10
  mode_dashLit_started: dashLitStarted
  timer_spinner_timer_complete{current_player.dice_pips==7}: roll7
  advance_lane: spin
  knock_out_hit: knockOut
  sw_dtSw_active: dropTarget
  s_kicker_active: kicker
  sw_dtSlingSw_active: dtSling
  s_star_1_active: stars
  s_star_2_active: stars
  s_star_3_active: stars

slide_player:
  mode_base_started:
    score_slide:
      target: lower
    topper_slide:
      target: upper
  start_boss:
    boss_slide:
      target: middle
  # beppi_play:
  #   beppi_slide:
  #     target: middle
  # cagney_play:
  #   cagney_slide:
  #     target: middle
  # calla_play:
  #   calla_slide:
  #    target: middle
  # capt_play:
  #   capt_slide:
  #    target: middle
  # hilda_play:
  #   hilda_slide:
  #    target: middle
  # ribbi_play:
  #   ribbi_slide:
  #     target: middle
  # robot_play:
  #   robot_slide:
  #     target: middle
  # root_play:
  #   root_slide:
  #     target: middle
  # train_play:
  #   train_slide:
  #     target: middle
  # wally_play:
  #   wally_slide:
  #     target: middle

event_player:
  beppi_play:
    start_boss:
      bossname: beppi
  cagney_play:
    start_boss:
      bossname: cagney
  calla_play:
    start_boss:
      bossname: calla
  capt_play:
    start_boss:
      bossname: capt
  hilda_play:
    start_boss:
      bossname: hilda
  ribbi_play:
    start_boss:
      bossname: ribbi
  robot_play:
    start_boss:
      bossname: robot
  root_play:
    start_boss:
      bossname: root
  train_play:
    start_boss:
      bossname: train
  wally_play:
    start_boss:
      bossname: wally



slides:
   boss_slide:
     widgets:
     - widget: video_boss_(bossname)
     - widget: C_widget
     - widget: cUp_widget
     - widget: P_widget
     - widget: M_widget
     - widget: mUg_widget
     - widget: G_widget
     - widget: S_widget
     - widget: O_widget
     - widget: U_widget
     - widget: L_widget
     - widget: dash_widget
     - widget: contract1_widget
     - widget: contract2_widget
     - widget: contract3_widget
     - widget: contract4_widget
     - widget: contract5_widget
     - widget: contract6_widget
     - widget: contract7_widget
     - widget: contract8_widget
     - widget: contract9_widget
     - widget: contract10_widget
   # beppi_slide:
   #   widgets:
   #   - type: video
   #     video: beppi
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # cagney_slide:
   #   widgets:
   #   - type: video
   #     video: cagney
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # calla_slide:
   #   widgets:
   #   - type: video
   #     video: calla
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # capt_slide:
   #   widgets:
   #   - type: video
   #     video: capt
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # hilda_slide:
   #   widgets:
   #   - type: video
   #     video: hilda
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # ribbi_slide:
   #   widgets:
   #   - type: video
   #     video: ribbi
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # robot_slide:
   #   widgets:
   #   - type: video
   #     video: robot
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # root_slide:
   #   widgets:
   #   - type: video
   #     video: root
   #     end_behavior: loop
   #     z: 1
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # train_slide:
   #   widgets:
   #   - type: video
   #     video: train
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget
   # wally_slide:
   #   widgets:
   #   - type: video
   #     video: wally
   #     end_behavior: loop
   #     z: 10
   #   - widget: C_widget
   #   - widget: cUp_widget
   #   - widget: P_widget
   #   - widget: M_widget
   #   - widget: mUg_widget
   #   - widget: G_widget
   #   - widget: S_widget
   #   - widget: O_widget
   #   - widget: U_widget
   #   - widget: L_widget
   #   - widget: dash_widget
   #   - widget: contract1_widget
   #   - widget: contract2_widget
   #   - widget: contract3_widget
   #   - widget: contract4_widget
   #   - widget: contract5_widget
   #   - widget: contract6_widget
   #   - widget: contract7_widget
   #   - widget: contract8_widget
   #   - widget: contract9_widget
   #   - widget: contract10_widget

widgets:
  video_boss_beppi:
    - type: video
      video: beppi
      end_behavior: loop
      z: 10
  video_boss_cagney:
    - type: video
      video: cagney
      end_behavior: loop
      z: 10
  video_boss_calla:
    - type: video
      video: calla
      end_behavior: loop
      z: 10
  video_boss_capt:
    - type: video
      video: capt
      end_behavior: loop
      z: 10
  video_boss_hilda:
    - type: video
      video: hilda
      end_behavior: loop
      z: 10
  video_boss_ribbi:
    - type: video
      video: ribbi
      end_behavior: loop
      z: 10
  video_boss_robot:
    - type: video
      video: robot
      end_behavior: loop
      z: 10
  video_boss_root:
    - type: video
      video: root
      end_behavior: loop
      z: 10
  video_boss_train:
    - type: video
      video: train
      end_behavior: loop
      z: 10
  video_boss_wally:
    - type: video
      video: wally
      end_behavior: loop
      z: 10
  contract1_widget:
    - type: image
      image: contract1_image
      z: 90
      opacity: 0
      animations:
        contract1_play: contract_animation
  contract2_widget:
    - type: image
      image: contract2_image
      z: 90
      opacity: 0
      animations:
        contract2_play: contract_animation
  contract3_widget:
    - type: image
      image: contract3_image
      z: 90
      opacity: 0
      animations:
        contract3_play: contract_animation
  contract4_widget:
    - type: image
      image: contract4_image
      z: 90
      opacity: 0
      animations:
        contract4_play: contract_animation
  contract5_widget:
    - type: image
      image: contract5_image
      z: 90
      opacity: 0
      animations:
        contract5_play: contract_animation
  contract6_widget:
    - type: image
      image: contract6_image
      z: 90
      opacity: 0
      animations:
        contract6_play: contract_animation
  contract7_widget:
    - type: image
      image: contract7_image
      z: 90
      opacity: 0
      animations:
        contract7_play: contract_animation
  contract8_widget:
    - type: image
      image: contract8_image
      z: 90
      opacity: 0
      animations:
        contract8_play: contract_animation
  contract9_widget:
    - type: image
      image: contract9_image
      z: 90
      opacity: 0
      animations:
        contract9_play: contract_animation
  contract10_widget:
    - type: image
      image: contract10_image
      z: 90
      opacity: 0
      animations:
        contract10_play: contract_animation
  C_widget:
    - type: image
      image: C_image
      z: 50
      anchor_y: top
      y: 0
      animations:
        s_dt_C_active: cupmug
  cUp_widget:
    - type: image
      image: cUp_image
      z: 50
      anchor_y: top
      y: 0
      animations:
        s_dt_U_active: cupmug
  P_widget:
    - type: image
      image: P_image
      z: 50
      anchor_y: top
      y: 0
      animations:
        s_dt_P_active: cupmug
  M_widget:
    - type: image
      image: M_image
      z: 50
      anchor_y: top
      y: 0
      animations:
        s_dt_M_active: cupmug
  mUg_widget:
    - type: image
      image: mUg_image
      z: 50
      anchor_y: top
      y: 0
      animations:
        s_dt_U2_active: cupmug
  G_widget:
    - type: image
      image: G_image
      z: 50
      anchor_y: top
      y: 0
      animations:
        s_dt_G_active: cupmug
  S_widget:
    - type: image
      image: S_image
      z: 50
      opacity: 0
      animations:
        s_soul_S_active: soul_animation
  O_widget:
    - type: image
      image: O_image
      z: 50
      opacity: 0
      animations:
        s_soul_O_active: soul_animation
  U_widget:
    - type: image
      image: soUl_image
      z: 50
      opacity: 0
      animations:
        s_soul_U_active: soul_animation
  L_widget:
    - type: image
      image: L_image
      z: 50
      opacity: 0
      animations:
        s_soul_L_active: soul_animation
  knockout_widget:
    - type: image
      image: knockout_image
      expire: 2s
      z: 10
  dash_widget:
    - type: image
      image: dash_image
      anchor_x: right
      x: 0
      z: 100
      animations:
        s_dash_L_active: dasher
        s_dash_R_active: dasher

animations:
  cupmug:
  - property: y
    value: 450
    duration: .1s
  - property: y
    value: 0
    relative: true
    duration: .75s
  - property: y
    value: 0
    duration: .1s
  soul_animation:
  - property: opacity
    value: 1
    duration: .5s
  - property: opacity
    value: 0
    relative: true
    duration: .1s
  - property: opacity
    value: 0
    duration: .5s
  contract_animation:
  - property: opacity
    value: 1
    duration: .5s
  - property: opacity
    value: 0
    relative: true
    duration: 1s
  - property: opacity
    value: 0
    duration: .5s
  dasher:
  - property: x
    value: 1080
    duration: .25s
  - property: x
    value: 0
    relative: true
    duration: .75s
  - property: x
    value: 2160
    duration: .25s
  - property: opacity
    value: 0
    duration: .1s
  - property: x
    value: 0
    duration: .1s
  - property: opacity
    value: 1
    duration: .1s

images:
  C_image:
    file: C.png
  cUp_image:
    file: cUp.png
  P_image:
    file: P.png
  M_image:
    file: M.png
  mUg_image:
    file: mUg.png
  G_image:
    file: G.png
  S_image:
    file: S.png
  O_image:
    file: O.png
  soUl_image:
    file: soUl.png
  L_image:
    file: L.png
  topper:
    file: CupheadTopper.png
  dash_image:
    file: dash.png
  contract1_image:
    file: contract1.png
  contract2_image:
    file: contract2.png
  contract3_image:
    file: contract3.png
  contract4_image:
    file: contract4.png
  contract5_image:
    file: contract5.png
  contract6_image:
    file: contract6.png
  contract7_image:
    file: contract7.png
  contract8_image:
    file: contract8.png
  contract9_image:
    file: contract9.png
  contract10_image:
    file: contract10.png
  mugman_image:
    file: mugman.zip
  cuphead_image:
    file: cuphead.zip
  knockout_image:
    file: knockout.zip
  perdition1_image:
    file: perdition1.png
  perdition2_image:
    file: perdition2.png
  perdition3_image:
    file: perdition3.png

videos:
  beppi:
    file: beppi.mp4
    height: 600
    width: 1060
  cagney:
    file: cagney.mp4
    height: 600
    width: 1080
  calla:
    file: calla.mp4
    height: 600
    width: 1060
  capt:
    file: capt.mp4
    height: 600
    width: 1060
  hilda:
    file: hilda.mp4
    height: 600
    width: 1060
  ribbi:
    file: ribbi.mp4
    height: 600
    width: 1060
  robot:
    file: robot.mp4
    height: 600
    width: 1060
  root:
    file: root.mp4
    height: 600
    width: 1060
  train:
    file: train.mp4
    height: 600
    width: 1080
  wally:
    file: wally.mp4
    height: 600
    width: 1060
